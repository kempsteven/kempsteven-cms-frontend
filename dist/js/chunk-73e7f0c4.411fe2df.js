(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-73e7f0c4"],{"1de3":function(e,t,l){},"2db7":function(e,t,l){"use strict";var a=l("1de3"),r=l.n(a);r.a},3878:function(e,t,l){"use strict";l.r(t);var a=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"skill"},[l("CardList",{attrs:{keyImg:"skillImg.url",keyName:"skillName",keyDescription:"skillLevel",list:e.skillList,loading:e.loading},on:{create:function(t){return e.createSkill()},delete:function(t){return e.deleteSkill(t)},edit:function(t){return e.editSkill(t)}},model:{value:e.params.keyword,callback:function(t){e.$set(e.params,"keyword",t)},expression:"params.keyword"}}),l("transition",{attrs:{name:"_transition-no-pos"}},[e.modalName.includes("create-skill-modal")?l("Modal",[l("SkillForm",{attrs:{slot:"content"},slot:"content"})],1):e._e()],1)],1)},r=[],i=(l("a481"),l("ac6a"),l("456d"),l("96cf"),l("3b8d")),n=l("db72"),s=l("5935"),o=l("c151"),c={loading:!1,params:{keyword:""},skillList:[],skillForm:{id:"",oldSkillImgPublicId:"",skillName:"",skillLevel:"",skillImage:null},createLoading:!1,skillFormChangeChecker:{id:"",oldSkillImgPublicId:"",skillName:"",skillLevel:"",skillImage:null},formHasChanged:!1,isEditSkill:!1,isFormComplete:!1},d={getSkillList:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t,l){var a,r,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.state,a.loading=!0,e.next=4,Object(o["a"])("get","/skill/get-skills".concat(l));case 4:r=e.sent,i=r.data,a.skillList=i.list,a.loading=!1;case 8:case"end":return e.stop()}},e)}));function t(t,l){return e.apply(this,arguments)}return t}(),createSkill:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){var l,a,r,i,n,s,c,d,u,m,k;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return l=t.state,a=t.commit,r=t.dispatch,l.createLoading=!0,i=l.skillForm,n=i.skillName,s=i.skillLevel,c=i.skillImage,d=new FormData,d.append("skillName",n),d.append("skillLevel",s),d.append("skillImg",c),e.next=9,Object(o["a"])("post","/skill/add-skills",d);case 9:return u=e.sent,m=u.status,k=u.data,e.next=14,a("clearForm");case 14:return e.next=16,r("modal/closeModal",{},{root:!0});case 16:if(200===m){e.next=20;break}return a("modal/errorModal",{root:!0}),l.createLoading=!1,e.abrupt("return");case 20:a("modal/toggleModal",{modalName:"alert-modal",modalType:"success",modalTitle:"Success",modalDesc:"You have successfully created a skill!"},{root:!0}),l.skillList=k.list,l.createLoading=!1;case 23:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),deleteSkill:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t,l){var a,r,i,n,s,c,d,u;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.state,r=t.commit,i=l.id,n=l.oldSkillImgPublicId,a.loading=!0,s=new FormData,s.append("oldSkillImgPublicId",n),e.next=7,Object(o["a"])("delete","/skill/delete-skills/".concat(i),{data:s});case 7:if(c=e.sent,d=c.status,u=c.data,200===d){e.next=14;break}return r("modal/errorModal",{root:!0}),a.loading=!1,e.abrupt("return");case 14:r("modal/toggleModal",{modalName:"alert-modal",modalType:"success",modalTitle:"Success",modalDesc:"You have successfully deleted a skill!"},{root:!0}),a.skillList=u.list,a.loading=!1;case 17:case"end":return e.stop()}},e)}));function t(t,l){return e.apply(this,arguments)}return t}(),editSkill:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){var l,a,r,i,n,s,c,d,u,m,k,p,g;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return l=t.state,a=t.commit,r=t.dispatch,l.createLoading=!0,i=l.skillForm,n=i.id,s=i.skillName,c=i.skillLevel,d=i.skillImage,u=i.oldSkillImgPublicId,m=new FormData,m.append("skillName",s),m.append("skillLevel",c),m.append("skillImg",d),m.append("oldSkillImgPublicId",u),e.next=10,Object(o["a"])("patch","/skill/edit-skills/".concat(n),m);case 10:return k=e.sent,p=k.status,g=k.data,e.next=15,r("modal/closeModal",{},{root:!0});case 15:if(200===p){e.next=19;break}return a("modal/errorModal",{root:!0}),l.createLoading=!1,e.abrupt("return");case 19:a("modal/toggleModal",{modalName:"alert-modal",modalType:"success",modalTitle:"Success",modalDesc:"You have successfully updated a skill!"},{root:!0}),l.skillList=g.list,l.createLoading=!1;case 22:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},u={updateField:s["c"],clearForm:function(){c.skillForm={id:"",oldSkillImgPublicId:"",skillName:"",skillLevel:"",skillImage:null},c.formHasChanged=!1,c.isEditSkill=!1},setFormChangesChecker:function(){c.skillFormChangeChecker=Object(n["a"])({},c.skillForm)},checkFormChanges:function(){for(var e=0,t=Object.keys(c.skillForm);e<t.length;e++){var l=t[e];if(c.skillForm[l]!==c.skillFormChangeChecker[l])return void(c.formHasChanged=!0)}},checkFormComplete:function(){c.skillForm.skillName&&c.skillForm.skillLevel&&c.skillForm.skillImage?c.isFormComplete=!0:c.isFormComplete=!1}},m={getField:s["a"]},k={state:c,actions:d,mutations:u,getters:m,namespaced:!0},p={beforeCreate:function(){this.$store._modulesNamespaceMap["skill/"]||this.$store.registerModule("skill",k)},computed:Object(n["a"])({},Object(s["b"])("skill",["loading","params","skillList","formHasChanged","skillForm.id","skillForm.oldSkillImgPublicId","skillForm.skillName","skillForm.skillLevel","skillForm.skillImage","createLoading","isEditSkill"]),{},Object(s["b"])("modal",["modalName"])),watch:{params:{handler:"checkParams",immediate:!0,deep:!0}},methods:{checkParams:function(){var e=this.params.keyword,t={};e&&(t.keyword=e),this.$router.push({query:t}),this.getSkillList()},getSkillList:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t,l,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.loading){e.next=2;break}return e.abrupt("return");case 2:return t=this.$route.fullPath,l=Object.keys(this.$route.query),a="",l.length>0&&(a=t.replace("/skill","")),e.next=8,this.$store.dispatch("skill/getSkillList",a);case 8:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),closeModal:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.createLoading){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.$store.commit("skill/checkFormChanges");case 4:if(this.formHasChanged){e.next=7;break}return this.$store.dispatch("modal/closeModal"),e.abrupt("return");case 7:this.$store.commit("modal/toggleModal",{modalName:"alert-modal",modalType:"warning",modalTitle:"Warning",modalDesc:"Are you sure you want to close this form?",storeAction:"modal/closeModal"});case 8:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),createSkill:function(){this.$store.commit("modal/toggleModal",{modalName:"create-skill-modal"})},deleteSkill:function(e){var t=e.skillImg,l=e._id;this.$store.commit("modal/toggleModal",{modalName:"alert-modal",modalType:"warning",modalTitle:"Warning",modalDesc:"Are you sure you want to delete this skill?",storeAction:"skill/deleteSkill",storePayload:{id:l,oldSkillImgPublicId:t.publicId}})},editSkill:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){var l,a,r,i,n,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return l=t._id,a=t.skillName,r=t.skillLevel,i=t.skillImg,this.isEditSkill=!0,this.id=l,this.skillName=a,this.skillLevel=r,this.oldSkillImgPublicId=i.publicId,e.next=8,fetch(i.url);case 8:return n=e.sent,e.next=11,n.blob();case 11:s=e.sent,this.skillImage=s,this.$store.commit("modal/toggleModal",{modalName:"create-skill-modal"});case 14:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},components:{CardList:function(){return l.e("chunk-30cb3fe8").then(l.bind(null,"e66d"))},Modal:function(){return l.e("chunk-40841074").then(l.bind(null,"1ab3"))},SkillForm:function(){return l.e("chunk-5338cf90").then(l.bind(null,"414f"))}}},g=p,h=(l("2db7"),l("2877")),f=Object(h["a"])(g,a,r,!1,null,"5bfb5584",null);t["default"]=f.exports},"456d":function(e,t,l){var a=l("4bf8"),r=l("0d58");l("5eda")("keys",function(){return function(e){return r(a(e))}})},"5eda":function(e,t,l){var a=l("5ca1"),r=l("8378"),i=l("79e5");e.exports=function(e,t){var l=(r.Object||{})[e]||Object[e],n={};n[e]=t(l),a(a.S+a.F*i(function(){l(1)}),"Object",n)}}}]);
//# sourceMappingURL=chunk-73e7f0c4.411fe2df.js.map